---
title: "Project 1: Narrative & Examples"
format: html
editor: visual
---

## Data Processing

We start by creating a function that takes any general URL (In this example the URL for the 2022 Census Microdata API from Census.gov) and then outputting the result of the GET() function as our URL_id object. After looking at its structure we can see that the raw data is in the content element. 
```{r}
URL_id <- usual_process("https://api.census.gov/data/2022/acs/acs1/pums?get=SEX,PWGTP,MAR&SCHL=24")
URL_id
str(URL_id, max.level = 1)
```

Next, we take the output of the GET() function (same output as function above) and turn it into a tibble using the helper function. This function both creates a tibble as well as assigns names that correspond to the requested data. 
```{r}
Census_2022 <- helper(URL_id) 
Census_2022
```

The census() function will build a URL based on variables specified within the function and then query the API and output the requested data as a neat tibble with appropriate data types.
In this case, the example has many NA values of JWAP because the JWAP variable value of 0 corresponds to either unemployed individuals or someone who is working from home, so a time of arrival for work is not applicable in this case.
```{r}
census(num_var = c("AGEP", "JWAP"))
```

If we want to look at a range of years, the census_year_range function calls the census function once for each year of interest, then merges these tibbles into one with a year variable.
```{r}

```
